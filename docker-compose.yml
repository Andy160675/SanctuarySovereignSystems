version: "3.9"
services:
  truth-engine:
    build: ./truth-engine
    container_name: sovereign-truth
    ports:
      - "5050:5050"
    volumes:
      - ./truth-engine/data:/app/data
      - D:/SOVEREIGN-2025-11-19:/app/corpus:ro
    restart: unless-stopped

  ollama:
    image: ollama/ollama
    container_name: sovereign-ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama:/root/.ollama
    restart: unless-stopped

  blade-watcher:
    build: ./blade-watcher
    container_name: sovereign-watcher
    volumes:
      - D:/SOVEREIGN-2025-11-19:/watch/corpus
      - ./truth-engine/data:/app/data
    restart: unless-stopped

  executor:
    build: .
    container_name: sovereign-executor
    volumes:
      - .:/app
      - ./Evidence:/data/evidence
      - ./Property:/data/property
      - ./Governance:/app/Governance
    environment:
      - EVIDENCE_TRACK=${EVIDENCE_TRACK:-stable}
      - PROPERTY_TRACK=${PROPERTY_TRACK:-insider}
      - PYTHONPATH=/app

  # Sovereign Services (Specialized Executors)
  evidence:
    build: .
    container_name: sovereign-evidence
    volumes:
      - .:/app
    environment:
      - PYTHONPATH=/app

  property:
    build: .
    container_name: sovereign-property
    volumes:
      - .:/app
    environment:
      - PYTHONPATH=/app

  boardroom:
    build: .
    container_name: sovereign-boardroom
    volumes:
      - .:/app
    environment:
      - PYTHONPATH=/app
    command: python -c "import time; print('Boardroom Active'); time.sleep(3600)"

volumes:
  ollama: