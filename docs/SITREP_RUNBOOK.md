# SITREP Runbook

**Version:** 1.0  
**Last Updated:** 2026-02-04

---

## Overview

This runbook documents the SITREP (Situation Report) capabilities for the Sovereign System. All commands produce truth-bound, evidence-backed outputs with cryptographic proofs.

---

## Quick Reference

| Command | Purpose | Output |
|---------|---------|--------|
| `python tools/self_heal_monitor.py --write-sitrep` | Live node status | `evidence/SITREP.md` |
| `pwsh scripts/governance/generate_sitrep_pack.ps1` | Full evidence pack | `validation/SITREP_PACK_<ts>/` |
| `pwsh scripts/governance/validate_sovereignty.ps1 -All` | Sovereignty suite | `validation/<run_id>/` |
| `python scripts/governance/verify_decision_ledger.py` | Ledger integrity | `validation/ledger_verify_<ts>.json` |

---

## Operator Entry Points

### 1. Live SITREP Update (Node Reachability)

```bash
python tools/self_heal_monitor.py --write-sitrep
```

**What it does:**
- Checks reachability of all configured nodes
- Updates `evidence/SITREP.md` with status table
- Preserves existing `Version:` and `Seal manifest:` lines

**Output:**
- `evidence/SITREP.md` (updated in place)

---

### 2. Generate SITREP Evidence Pack

```bash
pwsh scripts/governance/generate_sitrep_pack.ps1
```

**What it does:**
- Runs sovereignty validator
- Runs healthcheck
- Runs ledger verification
- Captures network/process snapshots
- Extracts ledger tail (last 50 entries)
- Generates deterministic checksums
- Creates cryptographic receipt (seal)
- Updates `evidence/SITREP.md` with pack summary

**Output:**
- `validation/SITREP_PACK_<timestamp>/` (full pack)
- `evidence/SITREP_PACK_<timestamp>.zip` (archive)
- `evidence/SITREP.md` (updated with verdicts)

---

### 3. Run Sovereignty Suite

```bash
pwsh scripts/governance/validate_sovereignty.ps1 -All
```

**What it does:**
- Checks constitution file integrity
- Validates governance config schema
- Verifies phase gate compliance
- Checks autonomy limits enforcement
- Validates decision ledger chain

**Output:**
- `validation/<run_id>/sovereignty_report.json`

---

### 4. Verify Decision Ledger

```bash
python scripts/governance/verify_decision_ledger.py
```

**What it does:**
- Verifies ledger file exists and is readable
- Counts total entries
- Validates hash chain integrity (if present)
- Reports first/last entry timestamps

**Output:**
- `validation/ledger_verify_<timestamp>.json`

---

## Evidence Pack Contents

Each SITREP pack contains:

| File | Description |
|------|-------------|
| `validate_sovereignty.log` | Sovereignty validator output |
| `healthcheck.log` | System health check results |
| `ledger_verify.log` | Decision ledger integrity verification |
| `netstat.txt` | Network connections snapshot |
| `processes.txt` | Running processes snapshot |
| `ledger_tail.jsonl` | Last 50 ledger entries |
| `pack_checksums.sha256` | Deterministic file checksums |
| `RECEIPT.sha256` | Pack seal (hash of checksums) |

---

## Verification Commands

### Verify Receipt Integrity

```powershell
$packDir = (Get-ChildItem validation -Directory | Sort-Object Name -Descending | Select-Object -First 1).FullName
$expected = Get-Content "$packDir\RECEIPT.sha256" -Raw
$actual = (Get-FileHash "$packDir\pack_checksums.sha256" -Algorithm SHA256).Hash
if ($expected.Trim() -eq $actual) { "RECEIPT OK: $actual" } else { "RECEIPT MISMATCH" }
```

### Verify Individual File

```powershell
$hash = (Get-FileHash "path/to/file" -Algorithm SHA256).Hash
# Compare against pack_checksums.sha256
```

---

## Sovereign Constraints

All SITREP outputs adhere to:

1. **Determinism:** Pack checksum excludes the checksum file itself; receipt hashes the checksum file (no self-referential hashing)

2. **Truth-safe:** Every "pass/verified" claim points to artifacts in `validation/<run_id>/`

3. **Evidence-bound:** No claim without supporting artifact

4. **Tamper-evident:** Hash chain integrity for decision ledger

---

## Day-2 Operations

### Minimal Daily Runbook

```bash
# 1. Update live status
python tools/self_heal_monitor.py --write-sitrep

# 2. Generate evidence pack (if needed)
pwsh scripts/governance/generate_sitrep_pack.ps1

# 3. Verify ledger integrity
python scripts/governance/verify_decision_ledger.py
```

### Weekly Sovereignty Check

```bash
pwsh scripts/governance/validate_sovereignty.ps1 -All
```

---

## Extending SITREP

To add new checks to the evidence pack:

1. Create check script in `scripts/governance/`
2. Add invocation to `generate_sitrep_pack.ps1`
3. Include output in checksums
4. Update SITREP.md template

---

*Generated by Sovereign System SITREP Infrastructure*
